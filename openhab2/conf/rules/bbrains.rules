var Number i = 0
/* replace ip/url and port to desired value */ 
val String bb_url = "http://<ip or url>:<port>/hubs/register"
var  String bbserverkey = "{secrectkey:none, uuid:"


/* Connect to Backend  */
rule "Notify at Startup"
    when
        /* first msg when openhab is started */
        System started
    then
        var String uuid
        uuid = sendHttpGetRequest("http://localhost:8080/rest/uuid")
        bbserverkey = bbserverkey + uuid + ", counter:"
        sendHttpPostRequest(bb_url, "text/plain", bbserverkey+i+"}")
    end

rule "Notify in scheduled"
    when
        /* update status every 2 hrs */
        /* Time cron "1/20 * * * * ?" */
        Time cron "0 0 2 * * ?"
    then
        sendHttpPostRequest(bb_url, "text/plain",  bbserverkey+i+"}")
        i = i+1
    end

